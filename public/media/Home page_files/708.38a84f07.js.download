(self.webpackChunkportal_nodejsdeps=self.webpackChunkportal_nodejsdeps||[]).push([[708],{2e3:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});n(4049);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"get",value:function(e){var t=document.querySelector('meta[name="'+e+'"]');return t?t.content:null}}])&&i(t.prototype,n),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},6706:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});n(6064),n(2834),n(1573),n(5996),n(5794),n(4954),n(4049);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o,r,u,s=n(5132),a=null,l=!1,c=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!l)throw new Error("Constructor is private. Use getInstance() instead");this._areValidationsAlreadyExecuted=!1,this._validationsBeforeSubmit=[],this._actionsBeforeSubmit=[],this._lastClickedSubmitter=null,this._debugEnabled=!1}var t,n,o;return t=e,(n=[{key:"init",value:function(){this._disableTemplatesMultipleSubmitPrevention(),this._attachHandlerForLastClickedSubmitter();var e=this;pjQuery("form").submit((function(t){var n=this;if(e._log("Submit start"),n._isSubmitted)return e._log("Form already submitted"),e._log("Submit end"),t.preventDefault(),!1;if(!e._areValidationsAlreadyExecuted){for(var i in e._validationsBeforeSubmit){var o=e._validationsBeforeSubmit[i];if(e._shouldBeExecuted(o,n)&&!o.callback(n))return e._log("Validation failed"),e._log("Submit end"),t.preventDefault(),!1}if(e._shouldExecuteAnyAction(n)){e._log("Executing action callbacks...");var r=[],u=e._getActionsBeforeSubmitByForm(n);for(var s in u){e._log("Callback "+s);var a=u[s](n);e._isPromise(a)&&r.push(a)}if(r.length)return e._log("Pending promises found, will re-submit when fulfilled"),e._resubmitAfterPromisesAreFulfilled(r,e._getSubmitterId(t)),e._log("Submit end"),t.preventDefault(),!1}}return e._log("Submitting..."),e._log("Submit end"),n._isSubmitted=!0,!0}))}},{key:"addValidationBeforeSubmit",value:function(e,t){this._validationsBeforeSubmit.push(this._buildArrayItem(t,e))}},{key:"addActionBeforeSubmit",value:function(e,t){this._actionsBeforeSubmit.push(this._buildArrayItem(t,e))}},{key:"_shouldBeExecuted",value:function(e,t){return!e.fieldId||pjQuery("#"+e.fieldId,t).length>0}},{key:"_shouldExecuteAnyAction",value:function(e){for(var t in this._actionsBeforeSubmit)if(this._shouldBeExecuted(this._actionsBeforeSubmit[t],e))return!0;return!1}},{key:"_getActionsBeforeSubmitByForm",value:function(e){var t=[];for(var n in this._actionsBeforeSubmit)this._shouldBeExecuted(this._actionsBeforeSubmit[n],e)&&t.push(this._actionsBeforeSubmit[n].callback);return t}},{key:"_buildArrayItem",value:function(e,t){return{fieldId:e,callback:t}}},{key:"_resubmitAfterPromisesAreFulfilled",value:function(e,t){var n=this;Promise.all(e).then((function(){setTimeout((function(){n._log("Promises fulfilled"),n._log("Re-submitting (click button: "+t+")"),n._areValidationsAlreadyExecuted=!0,pjQuery("#"+t).click()}),0)}))}},{key:"_isPromise",value:function(e){return null!=e&&"function"==typeof e.then}},{key:"_disableTemplatesMultipleSubmitPrevention",value:function(){pjQuery("form").attr("data-notCancellableInTpt",!0)}},{key:"_attachHandlerForLastClickedSubmitter",value:function(){var e=this;document.addEventListener("click",(function(t){t.target.closest&&(e._lastClickedSubmitter=t.target.closest("button, input[type=submit]"))}),!0)}},{key:"_getSubmitterId",value:function(e){if("submitter"in e)return e.originalEvent.submitter.id;var t=[document.activeElement,this._lastClickedSubmitter];this._lastClickedSubmitter=null;for(var n=0;n<t.length;n++){var i=t[n];if(i&&i.form&&i.matches("button, input[type=button], input[type=image]"))return i.id}return e.target.querySelector("button, input[type=button], input[type=image]").id}},{key:"_log",value:function(e){this._debugEnabled&&console.log("SubmitManager - "+e)}}])&&i(t.prototype,n),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();u=function(){return a||(l=!0,a=new c,l=!1),a},(r="getInstance")in(o=c)?Object.defineProperty(o,r,{value:u,enumerable:!0,configurable:!0,writable:!0}):o[r]=u,s.getInstance().addEventHandler(s.EVENT_LOAD_NAME,(function(){c.getInstance().init()}),s.PRIORITY_LOW);const f=c},7534:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(2e3);const o=function(){function e(){this.cookieUsageInfo=[],this._setApiUrl()}e.prototype._setApiUrl=function(){var e=new i.Z;this.apiUrl="/"+e.get("avature.portal.id")+"/_portalCookieUserConsent"},e.prototype.init=function(e){this.getAll(e)},e.prototype.getAll=function(e){this._sendGet({method:"getAll"},e)},e.prototype.getCurrentUserConsent=function(e){this._sendGet({method:"getCurrentUserConsent"},e)},e.prototype.acceptAll=function(e){this._sendPost({method:"acceptAll"},e)},e.prototype.getCookieUsage=function(e){return e(this.cookieUsageInfo)},e.prototype.addCookieUsageInfo=function(e,t){e.isInUseOnPage=t,this.cookieUsageInfo[e.variableName]=e},e.prototype.updateTypesConsent=function(e,t){this._sendPost({method:"updateTypesConsent",data:JSON.stringify(e)},t)},e.prototype.shouldRequestUserConsent=function(e){this._sendGet({method:"shouldRequestConsent"},e)},e.prototype._sendPost=function(e,t){pjQuery.post(this.apiUrl,e,t,"json")},e.prototype._sendGet=function(e,t){pjQuery.get(this.apiUrl,e,t,"json")};var t=null;return{getInstance:function(){return null===t&&(t=new e),t}}}()},5132:(e,t,n)=>{if(n(9001),n(4380),n(942),n(2834),n(9146),n(5657),!i)var i=n(9909);function o(){this.eventQueue={}}var r;o.prototype.addEventHandler=function(e,t,n){null==n&&(n=o.PRIORITY_LOWEST),this._initializeQueue(e),this.eventQueue[e][n].push(t)},o.prototype.getEventsByPriority=function(e,t){return void 0!==this.eventQueue[e]?this.eventQueue[e][t]:[]},o.prototype.getAllEventListeners=function(e){return void 0===this.eventQueue[e]?[]:i.flat(this.eventQueue[e],1/0)},o.prototype.dispatchEvent=function(e,t){if(void 0===this.eventQueue[e])return!1;var n=this;return this.getAllEventListeners(e).forEach((function(e){try{e.call(n,t)}catch(e){console.error(e)}})),!0},o.prototype._initializeQueue=function(e){void 0===this.eventQueue[e]&&(this.eventQueue[e]=Array.apply(null,Array(5)).map((function(){return[]})))},o.PRIORITY_LOWEST=4,o.PRIORITY_LOW=3,o.PRIORITY_MEDIUM=2,o.PRIORITY_HIGH=1,o.PRIORITY_HIGHEST=0,o.STATUS_SUCCESS="success",o.STATUS_ERROR="error",o.EVENT_LOAD_NAME="load",o.EVENT_AUTO_SAVE_NAME="autoSaveEvent",r=null,o.getInstance=function(){return r||(r=new o),r},e.exports=o},3514:e=>{function t(e){this.cookieUserConsentService=e}t.prototype.init=function(e){this.cookieUserConsentService.init(e)},t.prototype.getCurrentUserConsent=function(e){this.cookieUserConsentService.getCurrentUserConsent(e)},t.prototype.getCookieUsage=function(e){this.cookieUserConsentService.getCookieUsage(e)},t.prototype.updateTypesConsent=function(e,t){this.cookieUserConsentService.updateTypesConsent(e,t)},t.prototype.acceptAll=function(e){this.cookieUserConsentService.acceptAll(e)},t.prototype.shouldRequestUserConsent=function(e){this.cookieUserConsentService.shouldRequestUserConsent(e)},e.exports=t},2003:(e,t,n)=>{if(!i)var i=n(5132);function o(e){this.eventManager=e}o.prototype.attachToLoadEvent=function(e){this.eventManager.addEventHandler(o.EVENT_LOAD_NAME,e,i.PRIORITY_LOWEST)},o.prototype.attachToAutoSaveEvent=function(e){this.eventManager.addEventHandler(o.EVENT_AUTO_SAVE_NAME,e,i.PRIORITY_LOWEST)},o.EVENT_LOAD_NAME=i.EVENT_LOAD_NAME,o.EVENT_AUTO_SAVE_NAME=i.EVENT_AUTO_SAVE_NAME,o.STATUS_SUCCESS=i.STATUS_SUCCESS,o.STATUS_ERROR=i.STATUS_ERROR,e.exports=o},4264:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(7534);if(!o)var o=n(2003),r=n(5132);if(!u)var u=n(3514);function s(){}s.getEventManager=function(){return new o(r.getInstance())},s.getCookieUserConsentService=function(){return new u(i.Z.getInstance())};const a=s},9909:(e,t,n)=>{function i(){}n(7390),n(9001),n(4380),n(8296),n(2834),n(3263),n(1659),n(533),i.contains=function(e,t){return t.indexOf(e)>-1},i.flat=function(e,t){return"function"==typeof e.flat?e.flat(t):(void 0===t&&(t=1),t>0?e.reduce((function(e,n){return e.concat(Array.isArray(n)?i.flat(n,t-1):n)}),[]):e.slice())},e.exports=i}}]);